<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="../lib/echarts/echarts.js"></script>
    <script src="../lib/jquery/jquery-3.2.1.js"></script>
    <script src="../lib/vue/vue.min.js"></script>

</head>
<body>
<div id="echart_table">
    <div id="main" style="width: 600px;height: 400px"></div>
    <div id="table" style="width: 600px;height: 400px"></div>
</div>
</body>

<script>
    var echart_table = new Vue({
        el: '#echart_table',
        data: {
            a: '',
        },
        methods: {
            init_table() {
                var myChart = echarts.init(document.getElementById('main'));
                var myChart2 = echarts.init(document.getElementById('table'));

                //仪表盘样式
                option = {
                    tooltip : {
                        formatter: "{a} <br/>{c} {b}"
                    },
                    series : [
                        {
                            name: '速度',
                            type: 'gauge',
                            z: 3,
                            min: 0,
                            max: 220,
                            splitNumber: 11,
                            radius: '100%',
                            axisLine: {            // 坐标轴线
                                lineStyle: {       // 属性lineStyle控制线条样式
                                    width: 5
                                }
                            },
                            axisTick: {            // 坐标轴小标记
                                length: 15,        // 属性length控制线长
                                lineStyle: {       // 属性lineStyle控制线条样式
                                    color: 'auto'
                                }
                            },
                            splitLine: {           // 分隔线
                                length: 20,         // 属性length控制线长
                                lineStyle: {       // 属性lineStyle（详见lineStyle）控制线条样式
                                    color: 'auto'
                                }
                            },
                            axisLabel: {
                                backgroundColor: 'auto',
                                borderRadius: 2,
                                color: '#eee',
                                padding: 3,
                                textShadowBlur: 2,
                                textShadowOffsetX: 1,
                                textShadowOffsetY: 1,
                                textShadowColor: '#222'
                            },
                            title : {
                                // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                                fontWeight: 'bolder',
                                fontSize: 20,
                                fontStyle: 'italic'
                            },
                            detail : {
                                // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                                formatter: function (value) {
                                    value = (value + '').split('.');
                                    value.length < 2 && (value.push('00'));
                                    return ('00' + value[0]).slice(-2)
                                        + '.' + (value[1] + '00').slice(0, 2);
                                },
                                fontWeight: 'bolder',
                                borderRadius: 3,
                                backgroundColor: '#444',
                                borderColor: '#aaa',
                                shadowBlur: 5,
                                shadowColor: '#333',
                                shadowOffsetX: 0,
                                shadowOffsetY: 3,
                                borderWidth: 2,
                                textBorderColor: '#000',
                                textBorderWidth: 2,
                                textShadowBlur: 2,
                                textShadowColor: '#fff',
                                textShadowOffsetX: 0,
                                textShadowOffsetY: 0,
                                fontFamily: 'Arial',
                                width: 100,
                                color: '#eee',
                                rich: {}
                            },
                            data:[{value: 40, name: ''}]
                        },
                    ]
                };
                //圆点样式
                this.title = '单轴散点图';

                var month = ['一月', '二月', '三月', '四月', '五月', '六月', '七月',
                    '八月', '九月', '十月', '十一月', '十二月',];
                var days = ['Saturday', 'Friday', 'Thursday',
                    'Wednesday', 'Tuesday', 'Monday', 'Sunday'];

                var data = [[0,0,5],[0,1,4],[0,2,1] ,[1,0,4],[1,1,5],[2,0,1],[2,1,3]]
                option2 = {
                    tooltip: {
                        position: 'top'
                    },
                    title: [],
                    singleAxis: [],
                    series: [],
                };

                echarts.util.each(days, function (day, idx) {
                    option2.title.push({
                        textBaseline: 'middle',
                        top: (idx + 0.5) * 100 / 7 + '%',
                        text: day
                    });
                    option2.singleAxis.push({
                        left: 150,
                        type: 'category',
                        boundaryGap: false,
                        data: month,
                        top: (idx * 100 / 7 + 5) + '%',
                        height: (100 / 7 - 10) + '%',
                        axisLabel: {
                            interval: 1
                        }
                    });
                    option2.series.push({
                        singleAxisIndex: idx,
                        coordinateSystem: 'singleAxis',
                        type: 'scatter',
                        data: [],
                        symbolSize: function (dataItem) {
                            return dataItem[1] * 4;
                        }
                    });
                });

                echarts.util.each(data, function (dataItem) {
                    option2.series[dataItem[0]].data.push([dataItem[1], dataItem[2]]);
                });


                myChart.setOption(option);
                myChart2.setOption(option2);
            },
            get_views_month_of_year_avg() {
                $.ajax({
                    type: "get",
                    url: 'http://localhost:8081/ms/logs/views-month-of-year-avg',
                    success: function (result) {
                        console.log(result);
                        if (result.code) {
                        } else {
                        }
                    },
                    error: function () {
                        console.log("失败")
                    }
                })
            },
            get_views_day_of_month_avg() {
                $.ajax({
                    type: "get",
                    url: 'http://localhost:8081/ms/logs/views-day-of-month-avg',
                    success: function (result) {
                        console.log(result);
                        if (result.code) {
                        } else {
                        }
                    },
                    error: function () {
                        console.log("失败")
                    }
                })
            },
            get_views_day_of_week_avg() {
                $.ajax({
                    type: "get",
                    url: 'http://localhost:8081/ms/logs/views-day-of-week-avg',
                    success: function (result) {
                        console.log(result);
                        if (result.code) {
                        } else {
                        }
                    },
                    error: function () {
                        console.log("失败")
                    }
                })
            },
        },
        mounted() {
            this.init_table();
            this.get_views_day_of_week_avg();
        }

    });

</script>
</html>