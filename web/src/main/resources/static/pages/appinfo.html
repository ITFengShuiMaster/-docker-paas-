<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Index</title>
    <link rel="stylesheet" href="../lib/element/index.css"/>
    <script src="../lib/vue/vue.js"></script>
    <script src="../lib/element/index.js"></script>
    <script src="../lib/jquery/jquery_3.3.1.js"></script>
    <style>
        .homeTop {
            background: #ffffff;
            padding: 16px 32px 0;
            border: 1px solid #e8e8e8;
            margin-bottom: 15px;
            min-height: 100px;
            min-width: 100px;
        }

        .homeMiddle {
            padding: 20px;
            margin: 10px;
            background: #fff;
            min-height: 150px;
        }

        .homeBottom {
            padding: 20px;
            margin: 10px;
            background: #fff;
            min-height: 150px;
        }

        .makeInfo {
            padding: 20px;
            background: #fff;
            border-bottom: 1px solid #e8e8e8;
        }

        .appInfo {
            float: left;
            min-width: 200px;
        }

        .appInfo i, h3 {
            display: inline-block;
        }

        .appButton {
            float: right;
            min-width: 400px;
        }

        .appButton .buttonGroup, button {
            display: inline-block;
        }


        .a {
            /*display: inline-block;*/
            margin: 10px;
            min-height: 170px;
            border: 1px solid #e8e8e8;
            padding: 16px 32px 0;

        }

        .statusFirst, .timeSecond, .dpsThird, .resoureFourth {
            padding: 40px 0 40px 0;
            margin: 20px;
            border-bottom: 1px solid #e8e8e8;
        }

        .text {
            text-align: center;
        }

        .infos {
            padding: 20px;
        }

        .infos div {
            float: left;
            padding: 20px;
        }

        .infoinfos {
            border: 1px solid #e8e8e8;
            -webkit-border-radius: 5px;
            -moz-border-radius: 5px;
            border-radius: 5px;
            min-width: 500px;
            margin-left: 100px;
        }

        .buttonGroup button {
            margin: 0 -15px;
        }

        .logs p {
            margin-bottom: 0;
            color: #999;
        }

    </style>
</head>

<div id="home">
    <div class="homeTop">
        <div>
            <el-breadcrumb separator-class="el-icon-arrow-right">
                <el-breadcrumb-item><a href="/">首页</a></el-breadcrumb-item>
            </el-breadcrumb>
        </div>
        <div class="appInfo">
            <h3>{{appName}}</h3>
            <!--<i class="el-icon-edit" @click="dialogFormVisible = true"></i>-->
            <el-button type="text" @click="dialogFormVisible = true"><i class="el-icon-edit"></i></el-button>
            <el-dialog title="修改应用名称" :visible.sync="dialogFormVisible">
                <el-form :model="nameForm">
                    <el-form-item>
                        <el-input v-model="nameForm.name" auto-complete="off"></el-input>
                    </el-form-item>
                </el-form>
                <div slot="footer" class="dialog-footer">
                    <el-button @click="dialogFormVisible = false">取 消</el-button>
                    <el-button type="primary" @click="dialogFormVisible = false">确 定</el-button>
                </div>
            </el-dialog>

        </div>
        <div class="appButton">
            <div class="buttonGroup">
                <el-tooltip class="item" effect="dark" content="跳转到应用对外访问端口对应的域名地址" placement="top">
                    <el-button>访问</el-button>
                </el-tooltip>
                <el-button>关闭</el-button>
                <el-button>重启</el-button>
                <el-button>管理容器</el-button>
            </div>
            <el-button type="primary">重新部署</el-button>
        </div>
        <div class="tabs">
            <el-row>
                <el-col :span="24" :sm="24" :xs="24" :md="24" :lg="24">
                    <el-menu :default-active="activeIndex" class="el-menu-demo" mode="horizontal" @select="selectPage1">
                        <el-menu-item index="1">总览</el-menu-item>
                        <el-menu-item index="2">监控</el-menu-item>
                        <el-menu-item index="3">日志</el-menu-item>
                        <el-menu-item index="4">伸缩</el-menu-item>
                        <el-menu-item index="5">依赖</el-menu-item>
                        <el-menu-item index="6">存储</el-menu-item>
                        <el-menu-item index="7">端口</el-menu-item>
                        <el-menu-item index="8">扩展</el-menu-item>
                        <el-menu-item index="9">设置</el-menu-item>
                    </el-menu>

                </el-col>
            </el-row>

        </div>
    </div>
    <div class="content" id="con">

    </div>

</div>
</html>
<script>
    var home = new Vue({
        el: '#home',
        data: {
            appName:'MySQL',
            showList: {
                showOne: true,
                showTwo: false,
                showThree: false,
                showFour: false,
                showFive: false,
                showSix: false,
                showSeven: false,
                showEight: false,
                showNine: false
            },
            dialogTableVisible: false,
            dialogFormVisible: false,
            form: {
                name: '',
                region: ''
            },
            tableData: [{
                name: 'MySql',
                group: '2',
                memory: '512MB',
                message: '运行中'
            }, {
                name: 'Spring',
                group: '3',
                memory: '200MB',
                message: '运行中'
            }],
            connectInfo: [{
                name: 'MYSQL_USER',
                val: 'admin',
                des: '用户名',
                opera: ''
            }, {
                name: 'MYSQL_PASS',
                val: '2d849696',
                des: '密码',
                opera: ''
            }, {
                name: 'MYSQL_HOST',
                val: '127.0.0.1',
                des: '连接地址	',
                opera: ''
            }, {
                name: 'MYSQL_PORT',
                val: '3306',
                des: '端口',
                opera: ''
            }],
            appInfo: [{
                name: '',
                group: '',
                des: '',
                opera: ''
            }],
            lastingSet: [{
                name: 'ba464ae',
                list: '/data',
                type: 'share-file'
            }], lastingSet: [{
                name: 'ba464ae',
                list: '/data',
                type: 'share-file'
            }],
            fileStorage: [{
                localList: '',
                targetName: '',
                targetList: '',
                targetType: '',
                targetApp: '',
                targetGroup: ''
            }],
            monitorInfo: [{
                type: '启动时检测',
                status: '已启用'
            }, {
                type: '运行时检测',
                status: '未设置'
            }],
            powerInfo: [{
                name: '',
                mail: '',
                power: ''
            }],
            portInfo: [{}],
            nameForm: {
                name: ''
            },
            loading: true,
            option1: [{
                value: '256MB',
                label: '256'
            }, {
                value: '512MB',
                label: '512MB'
            }, {
                value: '1GB',
                label: '1GB'
            }],
            option2: [{
                value: '1',
                label: '1'
            }, {
                value: '2',
                label: '2'
            }],
            activeIndex: '1',
            pageArr: ['pages/application/app_overview.html', 'pages/application/app_monitor.html', 'pages/application/app_log.html', 'pages/application/app_flex.html', 'pages/application/app_extend.html', 'pages/application/app_storage.html', 'pages/application/app_port.html', 'pages/application/app_rely.html', 'pages/application/app_setting.html'],
        },
        methods: {
            selectPage1(index, indexPath) {
                console.log(this.pageArr[index - 1]);
                // 主要就是通过jquery的load方法，加内容加载到元素上
                $('#con').load(this.pageArr[index - 1], function (response, status, xhr) {
                });
            },
            infoInit() {
//                var app_id = this.getUrlParam('appId')
//                console.log(app_id)
                var that = this
                $.ajax({
                    type:'get',
                    url:'/tianyu-paas/app/1',
                    data:{

                    },
                    success:function (data) {
                        debugger
                        that.appName = data.data[0].appName
                        console.log("success")
                        console.log(data)
                    },
                    error:function () {

                    }
                })
            },
            getUrlParam(name) {
                var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
                var r = window.location.search.substr(1).match(reg); //匹配目标参数
                if (r != null) return unescape(r[2]);
                return null; //返回参数值
            }
        },
        created() {
            this.selectPage1(1, '');
            this.infoInit()
        }

    })
</script>